  [1m[36mActiveRecord::SchemaMigration Load (6.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: `#ignore` is deprecated and will be removed in 5.0. Please use `#transient` instead. (called from block (2 levels) in <top (required)> at /Users/ramil/src/srcclr/discourse/plugins/security-headers/spec/factories/domains.rb:3)
  [1m[35m (16.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "headlines_domains" DISABLE TRIGGER ALL;ALTER TABLE "headlines_scans" DISABLE TRIGGER ALL;ALTER TABLE "headlines_domains_categories" DISABLE TRIGGER ALL;ALTER TABLE "headlines_categories" DISABLE TRIGGER ALL
  [1m[36m (13.6ms)[0m  [1m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE 
            tablename !~ '_prt_' AND 
            tablename <> 'schema_migrations' AND 
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (19.6ms)[0m  select table_name from information_schema.views where table_schema = 'headlines_dev'
  [1m[36m (37.9ms)[0m  [1mTRUNCATE TABLE "public"."headlines_domains", "public"."headlines_scans", "public"."headlines_domains_categories", "public"."headlines_categories" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "headlines_scans" ENABLE TRIGGER ALL;ALTER TABLE "headlines_domains" ENABLE TRIGGER ALL;ALTER TABLE "headlines_domains_categories" ENABLE TRIGGER ALL;ALTER TABLE "headlines_categories" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (6.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (25.8ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic", "id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["title", "My Category"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"], ["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT "headlines_categories"."id", "headlines_categories"."title" FROM "headlines_categories" WHERE "headlines_categories"."id" = 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
[upsert] SELECT a.attname AS name, format_type(a.atttypid, a.atttypmod) AS sql_type, d.adsrc AS default
FROM pg_attribute a LEFT JOIN pg_attrdef d
  ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attrelid = '"headlines_domains"'::regclass
AND a.attnum > 0 AND NOT a.attisdropped

[upsert] Creating or replacing database function "upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290" on table "headlines_domains" for selector "name" and setter "country_code", "created_at", "data_alexa", "name", "rank", "updated_at"
[upsert] 
          CREATE OR REPLACE FUNCTION upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290("name_sel" character varying, "country_code_set" character varying, "created_at_set" character varying(255), "data_alexa_set" xml, "name_set" character varying, "rank_set" integer, "updated_at_set" character varying(255)) RETURNS VOID AS
          $$
          DECLARE
            first_try INTEGER := 1;
          BEGIN
            LOOP
              -- first try to update the key
              UPDATE "headlines_domains" SET "country_code" = "country_code_set", "data_alexa" = "data_alexa_set", "name" = "name_set", "rank" = "rank_set", "updated_at" = CAST("updated_at_set" AS timestamp without time zone)
                WHERE ("name" = "name_sel" OR ("name" IS NULL AND "name_sel" IS NULL));
              IF found THEN
                
                RETURN;
              END IF;
              -- not there, so try to insert the key
              -- if someone else inserts the same key concurrently,
              -- we could get a unique-key failure
              BEGIN
                INSERT INTO "headlines_domains"("country_code", "created_at", "data_alexa", "name", "rank", "updated_at") VALUES ("country_code_set", CAST("created_at_set" AS timestamp without time zone), "data_alexa_set", "name_set", "rank_set", CAST("updated_at_set" AS timestamp without time zone));
                
                RETURN;
              EXCEPTION WHEN unique_violation THEN
                -- seamusabshere 9/20/12 only retry once
                IF (first_try = 1) THEN
                  first_try := 0;
                ELSE
                  RETURN;
                END IF;
                -- Do nothing, and loop to try the UPDATE again.
              END;
            END LOOP;
          END;
          $$
          LANGUAGE plpgsql;
        
[upsert]
	Selector: {"name"=>"google.com"}
	Setter: {"country_code"=>"IN", "created_at"=>Tue, 18 Aug 2015 15:50:23 UTC +00:00, "data_alexa"=>"<ALEXA VER=\"0.9\" URL=\"flipkart.com/\" HOME=\"0\" AID=\"=\" IDN=\"flipkart.com/\">\n  <DMOZ>\n    <SITE BASE=\"flipkart.com/\" TITLE=\"Flipkart\" DESC=\"Flipkart is a leading destination for online shopping in India.\">\n      <CATS>\n        <CAT ID=\"Top/Regional/Asia/India/Business_and_Economy/Shopping\" TITLE=\"Business and Economy/Shopping\" CID=\"498976\"/>\n        <CAT ID=\"Top/Regional/Asia/India/Shopping\" TITLE=\"Business and Economy\" CID=\"498921\"/>\n      </CATS>\n    </SITE>\n  </DMOZ>\n  <SD>\n    <POPULARITY URL=\"flipkart.com/\" TEXT=\"92\" SOURCE=\"panel\"/>\n    <REACH RANK=\"105\"/>\n    <RANK DELTA=\"+7\"/>\n    <COUNTRY CODE=\"IN\" NAME=\"India\" RANK=\"6\"/>\n  </SD>\n</ALEXA>\n", "name"=>"google.com", "rank"=>1, "updated_at"=>Tue, 18 Aug 2015 15:50:23 UTC +00:00}
[upsert]
	Selector: {"name"=>"facebook.com"}
	Setter: {"country_code"=>"IN", "created_at"=>Tue, 18 Aug 2015 15:50:23 UTC +00:00, "data_alexa"=>"<ALEXA VER=\"0.9\" URL=\"flipkart.com/\" HOME=\"0\" AID=\"=\" IDN=\"flipkart.com/\">\n  <DMOZ>\n    <SITE BASE=\"flipkart.com/\" TITLE=\"Flipkart\" DESC=\"Flipkart is a leading destination for online shopping in India.\">\n      <CATS>\n        <CAT ID=\"Top/Regional/Asia/India/Business_and_Economy/Shopping\" TITLE=\"Business and Economy/Shopping\" CID=\"498976\"/>\n        <CAT ID=\"Top/Regional/Asia/India/Shopping\" TITLE=\"Business and Economy\" CID=\"498921\"/>\n      </CATS>\n    </SITE>\n  </DMOZ>\n  <SD>\n    <POPULARITY URL=\"flipkart.com/\" TEXT=\"92\" SOURCE=\"panel\"/>\n    <REACH RANK=\"105\"/>\n    <RANK DELTA=\"+7\"/>\n    <COUNTRY CODE=\"IN\" NAME=\"India\" RANK=\"6\"/>\n  </SD>\n</ALEXA>\n", "name"=>"facebook.com", "rank"=>2, "updated_at"=>Tue, 18 Aug 2015 15:50:23 UTC +00:00}
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
[upsert] SELECT a.attname AS name, format_type(a.atttypid, a.atttypmod) AS sql_type, d.adsrc AS default
FROM pg_attribute a LEFT JOIN pg_attrdef d
  ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attrelid = '"headlines_domains"'::regclass
AND a.attnum > 0 AND NOT a.attisdropped

[upsert] Creating or replacing database function "upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290" on table "headlines_domains" for selector "name" and setter "country_code", "created_at", "data_alexa", "name", "rank", "updated_at"
[upsert] 
          CREATE OR REPLACE FUNCTION upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290("name_sel" character varying, "country_code_set" character varying, "created_at_set" character varying(255), "data_alexa_set" xml, "name_set" character varying, "rank_set" integer, "updated_at_set" character varying(255)) RETURNS VOID AS
          $$
          DECLARE
            first_try INTEGER := 1;
          BEGIN
            LOOP
              -- first try to update the key
              UPDATE "headlines_domains" SET "country_code" = "country_code_set", "data_alexa" = "data_alexa_set", "name" = "name_set", "rank" = "rank_set", "updated_at" = CAST("updated_at_set" AS timestamp without time zone)
                WHERE ("name" = "name_sel" OR ("name" IS NULL AND "name_sel" IS NULL));
              IF found THEN
                
                RETURN;
              END IF;
              -- not there, so try to insert the key
              -- if someone else inserts the same key concurrently,
              -- we could get a unique-key failure
              BEGIN
                INSERT INTO "headlines_domains"("country_code", "created_at", "data_alexa", "name", "rank", "updated_at") VALUES ("country_code_set", CAST("created_at_set" AS timestamp without time zone), "data_alexa_set", "name_set", "rank_set", CAST("updated_at_set" AS timestamp without time zone));
                
                RETURN;
              EXCEPTION WHEN unique_violation THEN
                -- seamusabshere 9/20/12 only retry once
                IF (first_try = 1) THEN
                  first_try := 0;
                ELSE
                  RETURN;
                END IF;
                -- Do nothing, and loop to try the UPDATE again.
              END;
            END LOOP;
          END;
          $$
          LANGUAGE plpgsql;
        
[upsert]
	Selector: {"name"=>"google.com"}
	Setter: {"country_code"=>"IN", "created_at"=>Tue, 18 Aug 2015 15:50:23 UTC +00:00, "data_alexa"=>"<ALEXA VER=\"0.9\" URL=\"flipkart.com/\" HOME=\"0\" AID=\"=\" IDN=\"flipkart.com/\">\n  <DMOZ>\n    <SITE BASE=\"flipkart.com/\" TITLE=\"Flipkart\" DESC=\"Flipkart is a leading destination for online shopping in India.\">\n      <CATS>\n        <CAT ID=\"Top/Regional/Asia/India/Business_and_Economy/Shopping\" TITLE=\"Business and Economy/Shopping\" CID=\"498976\"/>\n        <CAT ID=\"Top/Regional/Asia/India/Shopping\" TITLE=\"Business and Economy\" CID=\"498921\"/>\n      </CATS>\n    </SITE>\n  </DMOZ>\n  <SD>\n    <POPULARITY URL=\"flipkart.com/\" TEXT=\"92\" SOURCE=\"panel\"/>\n    <REACH RANK=\"105\"/>\n    <RANK DELTA=\"+7\"/>\n    <COUNTRY CODE=\"IN\" NAME=\"India\" RANK=\"6\"/>\n  </SD>\n</ALEXA>\n", "name"=>"google.com", "rank"=>2, "updated_at"=>Tue, 18 Aug 2015 15:50:23 UTC +00:00}
  [1m[35mHeadlines::Domain Exists (0.4ms)[0m  SELECT  1 AS one FROM "headlines_domains" WHERE "headlines_domains"."name" = $1 LIMIT 1  [["name", "google.com"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "google.com"], ["rank", 3], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.441847"], ["updated_at", "2015-08-18 15:50:23.441847"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "twitter.com"], ["rank", 2], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.447611"], ["updated_at", "2015-08-18 15:50:23.447611"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "headlines_scans"[0m
  [1m[35mHeadlines::Domain Load (0.6ms)[0m  SELECT  "headlines_domains".* FROM "headlines_domains"  ORDER BY "headlines_domains"."id" ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.9ms)[0m  INSERT INTO "headlines_scans" ("score", "headers", "results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["score", 7], ["headers", "{\"strict-transport-security\":{\"max_age\":\"631138519\",\"includeSubDomains\":false,\"enabled\":true,\"value\":\"max-age=631138519\"},\"x-xss-protection\":{\"enabled\":true,\"mode\":\"block\",\"value\":\"1; mode=block\"},\"x-content-type-options\":{\"enabled\":true,\"value\":\"nosniff\"},\"x-frame-options\":{\"value\":\"sameorigin\"},\"public-key-pins\":{\"value\":\"pin-sha256='E9CZ9INDbd+2eRQozYqqbQ2yXLVKB9+xcprMF+44U1g=';max-age=631138519;report-only\"}}"], ["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"1\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"2\", \"public-key-pins\"=>\"1\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 4], ["created_at", "2015-08-18 15:50:23.549782"], ["updated_at", "2015-08-18 15:50:23.549782"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("score", "headers", "results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["score", 7], ["headers", "{\"strict-transport-security\":{\"max_age\":\"631138519\",\"includeSubDomains\":false,\"enabled\":true,\"value\":\"max-age=631138519\"},\"x-xss-protection\":{\"enabled\":true,\"mode\":\"block\",\"value\":\"1; mode=block\"},\"x-content-type-options\":{\"enabled\":true,\"value\":\"nosniff\"},\"x-frame-options\":{\"value\":\"sameorigin\"},\"public-key-pins\":{\"value\":\"pin-sha256='E9CZ9INDbd+2eRQozYqqbQ2yXLVKB9+xcprMF+44U1g=';max-age=631138519;report-only\"}}"], ["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"1\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"2\", \"public-key-pins\"=>\"1\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 5], ["created_at", "2015-08-18 15:50:23.575698"], ["updated_at", "2015-08-18 15:50:23.575698"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "headlines_scans"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "google.com"], ["rank", 4], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.583503"], ["updated_at", "2015-08-18 15:50:23.583503"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "twitter.com"], ["rank", 2], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.586982"], ["updated_at", "2015-08-18 15:50:23.586982"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "headlines_scans"
  [1m[36mHeadlines::Domain Load (0.4ms)[0m  [1mSELECT  "headlines_domains".* FROM "headlines_domains"  ORDER BY "headlines_domains"."id" ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("score", "headers", "results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["score", 7], ["headers", "{\"strict-transport-security\":{\"max_age\":\"631138519\",\"includeSubDomains\":false,\"enabled\":true,\"value\":\"max-age=631138519\"},\"x-xss-protection\":{\"enabled\":true,\"mode\":\"block\",\"value\":\"1; mode=block\"},\"x-content-type-options\":{\"enabled\":true,\"value\":\"nosniff\"},\"x-frame-options\":{\"value\":\"sameorigin\"},\"public-key-pins\":{\"value\":\"pin-sha256='E9CZ9INDbd+2eRQozYqqbQ2yXLVKB9+xcprMF+44U1g=';max-age=631138519;report-only\"}}"], ["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"1\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"2\", \"public-key-pins\"=>\"1\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 7], ["created_at", "2015-08-18 15:50:23.599098"], ["updated_at", "2015-08-18 15:50:23.599098"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "headlines_scans"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "google.com"], ["rank", 5], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.606388"], ["updated_at", "2015-08-18 15:50:23.606388"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "twitter.com"], ["rank", 2], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.609289"], ["updated_at", "2015-08-18 15:50:23.609289"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "headlines_scans"
  [1m[36mHeadlines::Domain Load (0.3ms)[0m  [1mSELECT  "headlines_domains".* FROM "headlines_domains"  ORDER BY "headlines_domains"."id" ASC LIMIT 1000[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "headlines_scans"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic", "category_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"], ["category_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "parent_category_ids", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "schaden.biz"], ["rank", 6], ["country_code", "US"], ["parent_category_ids", "{1,2}"], ["created_at", "2015-08-18 15:50:23.787079"], ["updated_at", "2015-08-18 15:50:23.787079"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "parent_category_ids", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "skiles.ca"], ["rank", 7], ["country_code", "US"], ["parent_category_ids", "{1,2}"], ["created_at", "2015-08-18 15:50:23.790319"], ["updated_at", "2015-08-18 15:50:23.790319"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mHeadlines::Domain Load (2.7ms)[0m  [1mSELECT "headlines_domains".* FROM "headlines_domains" WHERE (headlines_domains.parent_category_ids && ARRAY[1])[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"[0m  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_categories" ("title", "topic", "category_id") VALUES ($1, $2, $3) RETURNING "id"  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"], ["category_id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "heydomain.com"], ["rank", 8], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.806259"], ["updated_at", "2015-08-18 15:50:23.806259"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "pagac.us"], ["rank", 9], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.808831"], ["updated_at", "2015-08-18 15:50:23.808831"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "headlines_domains"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "heydomain.com"], ["rank", 10], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.814619"], ["updated_at", "2015-08-18 15:50:23.814619"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "mclaughlinstracke.us"], ["rank", 11], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.817399"], ["updated_at", "2015-08-18 15:50:23.817399"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mHeadlines::Domain Load (1.4ms)[0m  [1mSELECT "headlines_domains".* FROM "headlines_domains" WHERE (headlines_domains.name ILIKE 'heydomain.com%')[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "heydomain.com"], ["rank", 12], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.823753"], ["updated_at", "2015-08-18 15:50:23.823753"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "bogisich.co.uk"], ["rank", 13], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.826656"], ["updated_at", "2015-08-18 15:50:23.826656"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.3ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" WHERE (headlines_domains.name ILIKE 'hey%')
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "kling.us"], ["rank", 14], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.832840"], ["updated_at", "2015-08-18 15:50:23.832840"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-9\", \"x-xss-protection\"=>\"-7\", \"x-content-type-options\"=>\"-4\", \"x-download-options\"=>\"11\", \"x-frame-options\"=>\"15\", \"public-key-pins\"=>\"-15\", \"x-permitted-cross-domain-policies\"=>\"7\""], ["domain_id", 18], ["created_at", "2015-08-18 15:50:23.836384"], ["updated_at", "2015-08-18 15:50:23.836384"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "heidenreichhettinger.ca"], ["rank", 15], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.840201"], ["updated_at", "2015-08-18 15:50:23.840201"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-8\", \"x-xss-protection\"=>\"15\", \"x-content-type-options\"=>\"-7\", \"x-download-options\"=>\"-13\", \"x-frame-options\"=>\"6\", \"public-key-pins\"=>\"9\", \"x-permitted-cross-domain-policies\"=>\"8\""], ["domain_id", 19], ["created_at", "2015-08-18 15:50:23.843334"], ["updated_at", "2015-08-18 15:50:23.843334"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "hettingeroreilly.us"], ["rank", 16], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.846276"], ["updated_at", "2015-08-18 15:50:23.846276"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"-7\", \"x-content-type-options\"=>\"15\", \"x-download-options\"=>\"3\", \"x-frame-options\"=>\"-12\", \"public-key-pins\"=>\"-11\", \"x-permitted-cross-domain-policies\"=>\"-12\""], ["domain_id", 20], ["created_at", "2015-08-18 15:50:23.849806"], ["updated_at", "2015-08-18 15:50:23.849806"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"11\", \"x-xss-protection\"=>\"-6\", \"x-content-type-options\"=>\"-7\", \"x-download-options\"=>\"-15\", \"x-frame-options\"=>\"12\", \"public-key-pins\"=>\"6\", \"x-permitted-cross-domain-policies\"=>\"1\""], ["score", 14], ["created_at", "2015-08-18 15:50:23.852995"], ["updated_at", "2015-08-18 15:50:23.852995"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "torprodriguez.info"], ["rank", 17], ["country_code", "AU"], ["created_at", "2015-08-18 15:50:23.856516"], ["updated_at", "2015-08-18 15:50:23.856516"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 21], ["updated_at", "2015-08-18 15:50:23.858075"], ["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.3ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "leuschke.com"], ["rank", 18], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.865845"], ["updated_at", "2015-08-18 15:50:23.865845"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-11\", \"x-xss-protection\"=>\"-12\", \"x-content-type-options\"=>\"-4\", \"x-download-options\"=>\"-9\", \"x-frame-options\"=>\"5\", \"public-key-pins\"=>\"6\", \"x-permitted-cross-domain-policies\"=>\"-8\""], ["domain_id", 22], ["created_at", "2015-08-18 15:50:23.869098"], ["updated_at", "2015-08-18 15:50:23.869098"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "ritchie.biz"], ["rank", 19], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.872233"], ["updated_at", "2015-08-18 15:50:23.872233"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"13\", \"x-xss-protection\"=>\"4\", \"x-content-type-options\"=>\"8\", \"x-download-options\"=>\"8\", \"x-frame-options\"=>\"-7\", \"public-key-pins\"=>\"-6\", \"x-permitted-cross-domain-policies\"=>\"15\""], ["domain_id", 23], ["created_at", "2015-08-18 15:50:23.875896"], ["updated_at", "2015-08-18 15:50:23.875896"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "rohancrona.biz"], ["rank", 20], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.878843"], ["updated_at", "2015-08-18 15:50:23.878843"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-5\", \"x-xss-protection\"=>\"4\", \"x-content-type-options\"=>\"4\", \"x-download-options\"=>\"-7\", \"x-frame-options\"=>\"-10\", \"public-key-pins\"=>\"-2\", \"x-permitted-cross-domain-policies\"=>\"-9\""], ["domain_id", 24], ["created_at", "2015-08-18 15:50:23.883867"], ["updated_at", "2015-08-18 15:50:23.883867"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"2\", \"x-xss-protection\"=>\"-13\", \"x-content-type-options\"=>\"6\", \"x-download-options\"=>\"-2\", \"x-frame-options\"=>\"9\", \"public-key-pins\"=>\"-15\", \"x-permitted-cross-domain-policies\"=>\"-13\""], ["score", 14], ["created_at", "2015-08-18 15:50:23.887373"], ["updated_at", "2015-08-18 15:50:23.887373"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "botsford.name"], ["rank", 21], ["country_code", "AU"], ["created_at", "2015-08-18 15:50:23.890702"], ["updated_at", "2015-08-18 15:50:23.890702"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 25], ["updated_at", "2015-08-18 15:50:23.892239"], ["id", 11]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.2ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" WHERE "headlines_domains"."country_code" = $1  [["country_code", "AU"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "davis.co.uk"], ["rank", 22], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.900072"], ["updated_at", "2015-08-18 15:50:23.900072"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-12\", \"x-xss-protection\"=>\"-3\", \"x-content-type-options\"=>\"3\", \"x-download-options\"=>\"5\", \"x-frame-options\"=>\"-12\", \"public-key-pins\"=>\"-14\", \"x-permitted-cross-domain-policies\"=>\"-13\""], ["domain_id", 26], ["created_at", "2015-08-18 15:50:23.903248"], ["updated_at", "2015-08-18 15:50:23.903248"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "glover.name"], ["rank", 23], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.906114"], ["updated_at", "2015-08-18 15:50:23.906114"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-6\", \"x-xss-protection\"=>\"0\", \"x-content-type-options\"=>\"-9\", \"x-download-options\"=>\"-15\", \"x-frame-options\"=>\"-5\", \"public-key-pins\"=>\"-13\", \"x-permitted-cross-domain-policies\"=>\"12\""], ["domain_id", 27], ["created_at", "2015-08-18 15:50:23.909864"], ["updated_at", "2015-08-18 15:50:23.909864"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "grady.co.uk"], ["rank", 24], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.912857"], ["updated_at", "2015-08-18 15:50:23.912857"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-13\", \"x-xss-protection\"=>\"-15\", \"x-content-type-options\"=>\"6\", \"x-download-options\"=>\"8\", \"x-frame-options\"=>\"-7\", \"public-key-pins\"=>\"10\", \"x-permitted-cross-domain-policies\"=>\"-6\""], ["domain_id", 28], ["created_at", "2015-08-18 15:50:23.915830"], ["updated_at", "2015-08-18 15:50:23.915830"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"-5\", \"x-xss-protection\"=>\"-14\", \"x-content-type-options\"=>\"-12\", \"x-download-options\"=>\"-2\", \"x-frame-options\"=>\"-7\", \"public-key-pins\"=>\"8\", \"x-permitted-cross-domain-policies\"=>\"-4\""], ["score", 14], ["created_at", "2015-08-18 15:50:23.918914"], ["updated_at", "2015-08-18 15:50:23.918914"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "willms.com"], ["rank", 25], ["country_code", "AU"], ["created_at", "2015-08-18 15:50:23.922490"], ["updated_at", "2015-08-18 15:50:23.922490"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 29], ["updated_at", "2015-08-18 15:50:23.923946"], ["id", 15]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.8ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" INNER JOIN "headlines_scans" ON "headlines_scans"."domain_id" = "headlines_domains"."id" WHERE ((headlines_scans.score BETWEEN 10 AND 100))
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "prosacco.us"], ["rank", 26], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.934092"], ["updated_at", "2015-08-18 15:50:23.934092"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-14\", \"x-xss-protection\"=>\"-11\", \"x-content-type-options\"=>\"15\", \"x-download-options\"=>\"4\", \"x-frame-options\"=>\"-12\", \"public-key-pins\"=>\"7\", \"x-permitted-cross-domain-policies\"=>\"-6\""], ["domain_id", 30], ["created_at", "2015-08-18 15:50:23.937330"], ["updated_at", "2015-08-18 15:50:23.937330"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "corwin.info"], ["rank", 27], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.940302"], ["updated_at", "2015-08-18 15:50:23.940302"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"3\", \"x-xss-protection\"=>\"-1\", \"x-content-type-options\"=>\"8\", \"x-download-options\"=>\"15\", \"x-frame-options\"=>\"15\", \"public-key-pins\"=>\"-5\", \"x-permitted-cross-domain-policies\"=>\"-13\""], ["domain_id", 31], ["created_at", "2015-08-18 15:50:23.943844"], ["updated_at", "2015-08-18 15:50:23.943844"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "heidenreich.info"], ["rank", 28], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.946733"], ["updated_at", "2015-08-18 15:50:23.946733"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-10\", \"x-xss-protection\"=>\"-10\", \"x-content-type-options\"=>\"-7\", \"x-download-options\"=>\"-11\", \"x-frame-options\"=>\"-1\", \"public-key-pins\"=>\"-3\", \"x-permitted-cross-domain-policies\"=>\"5\""], ["domain_id", 32], ["created_at", "2015-08-18 15:50:23.949746"], ["updated_at", "2015-08-18 15:50:23.949746"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"12\", \"x-xss-protection\"=>\"3\", \"x-content-type-options\"=>\"-9\", \"x-download-options\"=>\"-1\", \"x-frame-options\"=>\"5\", \"public-key-pins\"=>\"-11\", \"x-permitted-cross-domain-policies\"=>\"-15\""], ["score", 14], ["created_at", "2015-08-18 15:50:23.952687"], ["updated_at", "2015-08-18 15:50:23.952687"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "schadenkovacek.co.uk"], ["rank", 29], ["country_code", "AU"], ["created_at", "2015-08-18 15:50:23.956563"], ["updated_at", "2015-08-18 15:50:23.956563"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 33], ["updated_at", "2015-08-18 15:50:23.958299"], ["id", 19]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (3.3ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" INNER JOIN "headlines_scans" ON "headlines_scans"."domain_id" = "headlines_domains"."id" WHERE (((headlines_scans.results -> 'strict-transport-security')::int > 0))
  [1m[36mHeadlines::Scan Load (0.4ms)[0m  [1mSELECT  "headlines_scans".* FROM "headlines_scans" WHERE "headlines_scans"."domain_id" = $1  ORDER BY headlines_scans.id DESC LIMIT 1[0m  [["domain_id", 31]]
  [1m[35mHeadlines::Scan Load (0.5ms)[0m  SELECT  "headlines_scans".* FROM "headlines_scans" WHERE "headlines_scans"."domain_id" = $1  ORDER BY headlines_scans.id DESC LIMIT 1  [["domain_id", 33]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "webernikolaus.info"], ["rank", 30], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.975834"], ["updated_at", "2015-08-18 15:50:23.975834"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"[0m  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"  [["domain_name", "webernikolaus.info"], ["category_id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "klocko.info"], ["rank", 31], ["country_code", "US"], ["created_at", "2015-08-18 15:50:23.995314"], ["updated_at", "2015-08-18 15:50:23.995314"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"  [["domain_name", "klocko.info"], ["category_id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m


Started GET "/headlines/categories.json" for 127.0.0.1 at 2015-08-18 18:50:24 +0300
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Headlines::CategoriesController#index as JSON
  [1m[36mHeadlines::Category Load (0.3ms)[0m  [1mSELECT "headlines_categories".* FROM "headlines_categories" WHERE "headlines_categories"."category_id" = $1[0m  [["category_id", 1]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "christiansen.biz"], ["rank", 32], ["country_code", "US"], ["created_at", "2015-08-18 15:50:24.045072"], ["updated_at", "2015-08-18 15:50:24.045072"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"[0m  [["domain_name", "christiansen.biz"], ["category_id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "bode.biz"], ["rank", 33], ["country_code", "US"], ["created_at", "2015-08-18 15:50:24.053974"], ["updated_at", "2015-08-18 15:50:24.053974"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"[0m  [["domain_name", "bode.biz"], ["category_id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1


Started GET "/headlines/categories.json?domains_per_category=1" for 127.0.0.1 at 2015-08-18 18:50:24 +0300
Processing by Headlines::CategoriesController#index as JSON
  Parameters: {"domains_per_category"=>"1"}
  [1m[36mHeadlines::Category Load (0.4ms)[0m  [1mSELECT "headlines_categories".* FROM "headlines_categories" WHERE "headlines_categories"."category_id" = $1[0m  [["category_id", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (7.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
DEPRECATION WARNING: `#ignore` is deprecated and will be removed in 5.0. Please use `#transient` instead. (called from block (2 levels) in <top (required)> at /Users/ramil/src/srcclr/discourse/plugins/security-headers/spec/factories/domains.rb:3)
  [1m[35m (1.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "headlines_scans" DISABLE TRIGGER ALL;ALTER TABLE "headlines_domains" DISABLE TRIGGER ALL;ALTER TABLE "headlines_domains_categories" DISABLE TRIGGER ALL;ALTER TABLE "headlines_categories" DISABLE TRIGGER ALL
  [1m[36m (1.7ms)[0m  [1m          SELECT schemaname || '.' || tablename
          FROM pg_tables
          WHERE 
            tablename !~ '_prt_' AND 
            tablename <> 'schema_migrations' AND 
            schemaname = ANY (current_schemas(false))
[0m
  [1m[35m (1.7ms)[0m  select table_name from information_schema.views where table_schema = 'headlines_dev'
  [1m[36m (40.0ms)[0m  [1mTRUNCATE TABLE "public"."headlines_scans", "public"."headlines_domains", "public"."headlines_domains_categories", "public"."headlines_categories" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "headlines_scans" ENABLE TRIGGER ALL;ALTER TABLE "headlines_domains" ENABLE TRIGGER ALL;ALTER TABLE "headlines_domains_categories" ENABLE TRIGGER ALL;ALTER TABLE "headlines_categories" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic", "id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["title", "My Category"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"], ["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mSELECT "headlines_categories"."id", "headlines_categories"."title" FROM "headlines_categories" WHERE "headlines_categories"."id" = 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
[upsert] SELECT a.attname AS name, format_type(a.atttypid, a.atttypmod) AS sql_type, d.adsrc AS default
FROM pg_attribute a LEFT JOIN pg_attrdef d
  ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attrelid = '"headlines_domains"'::regclass
AND a.attnum > 0 AND NOT a.attisdropped

[upsert] Creating or replacing database function "upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290" on table "headlines_domains" for selector "name" and setter "country_code", "created_at", "data_alexa", "name", "rank", "updated_at"
[upsert] 
          CREATE OR REPLACE FUNCTION upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290("name_sel" character varying, "country_code_set" character varying, "created_at_set" character varying(255), "data_alexa_set" xml, "name_set" character varying, "rank_set" integer, "updated_at_set" character varying(255)) RETURNS VOID AS
          $$
          DECLARE
            first_try INTEGER := 1;
          BEGIN
            LOOP
              -- first try to update the key
              UPDATE "headlines_domains" SET "country_code" = "country_code_set", "data_alexa" = "data_alexa_set", "name" = "name_set", "rank" = "rank_set", "updated_at" = CAST("updated_at_set" AS timestamp without time zone)
                WHERE ("name" = "name_sel" OR ("name" IS NULL AND "name_sel" IS NULL));
              IF found THEN
                
                RETURN;
              END IF;
              -- not there, so try to insert the key
              -- if someone else inserts the same key concurrently,
              -- we could get a unique-key failure
              BEGIN
                INSERT INTO "headlines_domains"("country_code", "created_at", "data_alexa", "name", "rank", "updated_at") VALUES ("country_code_set", CAST("created_at_set" AS timestamp without time zone), "data_alexa_set", "name_set", "rank_set", CAST("updated_at_set" AS timestamp without time zone));
                
                RETURN;
              EXCEPTION WHEN unique_violation THEN
                -- seamusabshere 9/20/12 only retry once
                IF (first_try = 1) THEN
                  first_try := 0;
                ELSE
                  RETURN;
                END IF;
                -- Do nothing, and loop to try the UPDATE again.
              END;
            END LOOP;
          END;
          $$
          LANGUAGE plpgsql;
        
[upsert]
	Selector: {"name"=>"google.com"}
	Setter: {"country_code"=>"IN", "created_at"=>Wed, 19 Aug 2015 13:30:21 UTC +00:00, "data_alexa"=>"<ALEXA VER=\"0.9\" URL=\"flipkart.com/\" HOME=\"0\" AID=\"=\" IDN=\"flipkart.com/\">\n  <DMOZ>\n    <SITE BASE=\"flipkart.com/\" TITLE=\"Flipkart\" DESC=\"Flipkart is a leading destination for online shopping in India.\">\n      <CATS>\n        <CAT ID=\"Top/Regional/Asia/India/Business_and_Economy/Shopping\" TITLE=\"Business and Economy/Shopping\" CID=\"498976\"/>\n        <CAT ID=\"Top/Regional/Asia/India/Shopping\" TITLE=\"Business and Economy\" CID=\"498921\"/>\n      </CATS>\n    </SITE>\n  </DMOZ>\n  <SD>\n    <POPULARITY URL=\"flipkart.com/\" TEXT=\"92\" SOURCE=\"panel\"/>\n    <REACH RANK=\"105\"/>\n    <RANK DELTA=\"+7\"/>\n    <COUNTRY CODE=\"IN\" NAME=\"India\" RANK=\"6\"/>\n  </SD>\n</ALEXA>\n", "name"=>"google.com", "rank"=>1, "updated_at"=>Wed, 19 Aug 2015 13:30:21 UTC +00:00}
[upsert]
	Selector: {"name"=>"facebook.com"}
	Setter: {"country_code"=>"IN", "created_at"=>Wed, 19 Aug 2015 13:30:21 UTC +00:00, "data_alexa"=>"<ALEXA VER=\"0.9\" URL=\"flipkart.com/\" HOME=\"0\" AID=\"=\" IDN=\"flipkart.com/\">\n  <DMOZ>\n    <SITE BASE=\"flipkart.com/\" TITLE=\"Flipkart\" DESC=\"Flipkart is a leading destination for online shopping in India.\">\n      <CATS>\n        <CAT ID=\"Top/Regional/Asia/India/Business_and_Economy/Shopping\" TITLE=\"Business and Economy/Shopping\" CID=\"498976\"/>\n        <CAT ID=\"Top/Regional/Asia/India/Shopping\" TITLE=\"Business and Economy\" CID=\"498921\"/>\n      </CATS>\n    </SITE>\n  </DMOZ>\n  <SD>\n    <POPULARITY URL=\"flipkart.com/\" TEXT=\"92\" SOURCE=\"panel\"/>\n    <REACH RANK=\"105\"/>\n    <RANK DELTA=\"+7\"/>\n    <COUNTRY CODE=\"IN\" NAME=\"India\" RANK=\"6\"/>\n  </SD>\n</ALEXA>\n", "name"=>"facebook.com", "rank"=>2, "updated_at"=>Wed, 19 Aug 2015 13:30:21 UTC +00:00}
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
[upsert] SELECT a.attname AS name, format_type(a.atttypid, a.atttypmod) AS sql_type, d.adsrc AS default
FROM pg_attribute a LEFT JOIN pg_attrdef d
  ON a.attrelid = d.adrelid AND a.attnum = d.adnum
WHERE a.attrelid = '"headlines_domains"'::regclass
AND a.attnum > 0 AND NOT a.attisdropped

[upsert] Creating or replacing database function "upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290" on table "headlines_domains" for selector "name" and setter "country_code", "created_at", "data_alexa", "name", "rank", "updated_at"
[upsert] 
          CREATE OR REPLACE FUNCTION upsert2_1_0_headlines_domains_SEL_name_SET_country_co959556290("name_sel" character varying, "country_code_set" character varying, "created_at_set" character varying(255), "data_alexa_set" xml, "name_set" character varying, "rank_set" integer, "updated_at_set" character varying(255)) RETURNS VOID AS
          $$
          DECLARE
            first_try INTEGER := 1;
          BEGIN
            LOOP
              -- first try to update the key
              UPDATE "headlines_domains" SET "country_code" = "country_code_set", "data_alexa" = "data_alexa_set", "name" = "name_set", "rank" = "rank_set", "updated_at" = CAST("updated_at_set" AS timestamp without time zone)
                WHERE ("name" = "name_sel" OR ("name" IS NULL AND "name_sel" IS NULL));
              IF found THEN
                
                RETURN;
              END IF;
              -- not there, so try to insert the key
              -- if someone else inserts the same key concurrently,
              -- we could get a unique-key failure
              BEGIN
                INSERT INTO "headlines_domains"("country_code", "created_at", "data_alexa", "name", "rank", "updated_at") VALUES ("country_code_set", CAST("created_at_set" AS timestamp without time zone), "data_alexa_set", "name_set", "rank_set", CAST("updated_at_set" AS timestamp without time zone));
                
                RETURN;
              EXCEPTION WHEN unique_violation THEN
                -- seamusabshere 9/20/12 only retry once
                IF (first_try = 1) THEN
                  first_try := 0;
                ELSE
                  RETURN;
                END IF;
                -- Do nothing, and loop to try the UPDATE again.
              END;
            END LOOP;
          END;
          $$
          LANGUAGE plpgsql;
        
[upsert]
	Selector: {"name"=>"google.com"}
	Setter: {"country_code"=>"IN", "created_at"=>Wed, 19 Aug 2015 13:30:21 UTC +00:00, "data_alexa"=>"<ALEXA VER=\"0.9\" URL=\"flipkart.com/\" HOME=\"0\" AID=\"=\" IDN=\"flipkart.com/\">\n  <DMOZ>\n    <SITE BASE=\"flipkart.com/\" TITLE=\"Flipkart\" DESC=\"Flipkart is a leading destination for online shopping in India.\">\n      <CATS>\n        <CAT ID=\"Top/Regional/Asia/India/Business_and_Economy/Shopping\" TITLE=\"Business and Economy/Shopping\" CID=\"498976\"/>\n        <CAT ID=\"Top/Regional/Asia/India/Shopping\" TITLE=\"Business and Economy\" CID=\"498921\"/>\n      </CATS>\n    </SITE>\n  </DMOZ>\n  <SD>\n    <POPULARITY URL=\"flipkart.com/\" TEXT=\"92\" SOURCE=\"panel\"/>\n    <REACH RANK=\"105\"/>\n    <RANK DELTA=\"+7\"/>\n    <COUNTRY CODE=\"IN\" NAME=\"India\" RANK=\"6\"/>\n  </SD>\n</ALEXA>\n", "name"=>"google.com", "rank"=>2, "updated_at"=>Wed, 19 Aug 2015 13:30:21 UTC +00:00}
  [1m[35mHeadlines::Domain Exists (0.4ms)[0m  SELECT  1 AS one FROM "headlines_domains" WHERE "headlines_domains"."name" = $1 LIMIT 1  [["name", "google.com"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "google.com"], ["rank", 3], ["country_code", "US"], ["created_at", "2015-08-19 13:30:21.784799"], ["updated_at", "2015-08-19 13:30:21.784799"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "twitter.com"], ["rank", 2], ["country_code", "US"], ["created_at", "2015-08-19 13:30:21.788597"], ["updated_at", "2015-08-19 13:30:21.788597"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "headlines_scans"[0m
  [1m[35mHeadlines::Domain Load (0.6ms)[0m  SELECT  "headlines_domains".* FROM "headlines_domains"  ORDER BY "headlines_domains"."id" ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.6ms)[0m  INSERT INTO "headlines_scans" ("score", "headers", "results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["score", 7], ["headers", "{\"strict-transport-security\":{\"max_age\":\"631138519\",\"includeSubDomains\":false,\"enabled\":true,\"value\":\"max-age=631138519\"},\"x-xss-protection\":{\"enabled\":true,\"mode\":\"block\",\"value\":\"1; mode=block\"},\"x-content-type-options\":{\"enabled\":true,\"value\":\"nosniff\"},\"x-frame-options\":{\"value\":\"sameorigin\"},\"public-key-pins\":{\"value\":\"pin-sha256='E9CZ9INDbd+2eRQozYqqbQ2yXLVKB9+xcprMF+44U1g=';max-age=631138519;report-only\"}}"], ["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"1\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"2\", \"public-key-pins\"=>\"1\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 4], ["created_at", "2015-08-19 13:30:21.886012"], ["updated_at", "2015-08-19 13:30:21.886012"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("score", "headers", "results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["score", 7], ["headers", "{\"strict-transport-security\":{\"max_age\":\"631138519\",\"includeSubDomains\":false,\"enabled\":true,\"value\":\"max-age=631138519\"},\"x-xss-protection\":{\"enabled\":true,\"mode\":\"block\",\"value\":\"1; mode=block\"},\"x-content-type-options\":{\"enabled\":true,\"value\":\"nosniff\"},\"x-frame-options\":{\"value\":\"sameorigin\"},\"public-key-pins\":{\"value\":\"pin-sha256='E9CZ9INDbd+2eRQozYqqbQ2yXLVKB9+xcprMF+44U1g=';max-age=631138519;report-only\"}}"], ["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"1\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"2\", \"public-key-pins\"=>\"1\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 5], ["created_at", "2015-08-19 13:30:21.901551"], ["updated_at", "2015-08-19 13:30:21.901551"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "headlines_scans"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "google.com"], ["rank", 4], ["country_code", "US"], ["created_at", "2015-08-19 13:30:21.908163"], ["updated_at", "2015-08-19 13:30:21.908163"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "twitter.com"], ["rank", 2], ["country_code", "US"], ["created_at", "2015-08-19 13:30:21.910806"], ["updated_at", "2015-08-19 13:30:21.910806"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "headlines_scans"
  [1m[36mHeadlines::Domain Load (0.4ms)[0m  [1mSELECT  "headlines_domains".* FROM "headlines_domains"  ORDER BY "headlines_domains"."id" ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("score", "headers", "results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["score", 7], ["headers", "{\"strict-transport-security\":{\"max_age\":\"631138519\",\"includeSubDomains\":false,\"enabled\":true,\"value\":\"max-age=631138519\"},\"x-xss-protection\":{\"enabled\":true,\"mode\":\"block\",\"value\":\"1; mode=block\"},\"x-content-type-options\":{\"enabled\":true,\"value\":\"nosniff\"},\"x-frame-options\":{\"value\":\"sameorigin\"},\"public-key-pins\":{\"value\":\"pin-sha256='E9CZ9INDbd+2eRQozYqqbQ2yXLVKB9+xcprMF+44U1g=';max-age=631138519;report-only\"}}"], ["results", "\"strict-transport-security\"=>\"1\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"1\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"2\", \"public-key-pins\"=>\"1\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 7], ["created_at", "2015-08-19 13:30:21.922183"], ["updated_at", "2015-08-19 13:30:21.922183"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "headlines_scans"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "google.com"], ["rank", 5], ["country_code", "US"], ["created_at", "2015-08-19 13:30:21.929057"], ["updated_at", "2015-08-19 13:30:21.929057"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "twitter.com"], ["rank", 2], ["country_code", "US"], ["created_at", "2015-08-19 13:30:21.932041"], ["updated_at", "2015-08-19 13:30:21.932041"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "headlines_scans"
  [1m[36mHeadlines::Domain Load (0.4ms)[0m  [1mSELECT  "headlines_domains".* FROM "headlines_domains"  ORDER BY "headlines_domains"."id" ASC LIMIT 1000[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "headlines_scans"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic", "category_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"], ["category_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "parent_category_ids", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "ondricka.ca"], ["rank", 6], ["country_code", "US"], ["parent_category_ids", "{1,2}"], ["created_at", "2015-08-19 13:30:22.123958"], ["updated_at", "2015-08-19 13:30:22.123958"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "parent_category_ids", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "pollichstark.com"], ["rank", 7], ["country_code", "US"], ["parent_category_ids", "{1,2}"], ["created_at", "2015-08-19 13:30:22.128123"], ["updated_at", "2015-08-19 13:30:22.128123"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mHeadlines::Domain Load (1.1ms)[0m  [1mSELECT "headlines_domains".* FROM "headlines_domains" WHERE (headlines_domains.parent_category_ids && ARRAY[1])[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"[0m  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "headlines_categories" ("title", "topic", "category_id") VALUES ($1, $2, $3) RETURNING "id"  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"], ["category_id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "heydomain.com"], ["rank", 8], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.149219"], ["updated_at", "2015-08-19 13:30:22.149219"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "walker.com"], ["rank", 9], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.154039"], ["updated_at", "2015-08-19 13:30:22.154039"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "headlines_domains"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "heydomain.com"], ["rank", 10], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.160851"], ["updated_at", "2015-08-19 13:30:22.160851"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "gradystark.us"], ["rank", 11], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.163484"], ["updated_at", "2015-08-19 13:30:22.163484"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mHeadlines::Domain Load (0.5ms)[0m  [1mSELECT "headlines_domains".* FROM "headlines_domains" WHERE (headlines_domains.name ILIKE 'heydomain.com%')[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "heydomain.com"], ["rank", 12], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.170556"], ["updated_at", "2015-08-19 13:30:22.170556"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "klockobergnaum.com"], ["rank", 13], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.173181"], ["updated_at", "2015-08-19 13:30:22.173181"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.3ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" WHERE (headlines_domains.name ILIKE 'hey%')
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "hamill.ca"], ["rank", 14], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.179195"], ["updated_at", "2015-08-19 13:30:22.179195"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"13\", \"x-xss-protection\"=>\"-11\", \"x-content-type-options\"=>\"10\", \"x-download-options\"=>\"-2\", \"x-frame-options\"=>\"6\", \"public-key-pins\"=>\"-4\", \"x-permitted-cross-domain-policies\"=>\"-6\""], ["domain_id", 18], ["created_at", "2015-08-19 13:30:22.182778"], ["updated_at", "2015-08-19 13:30:22.182778"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "tromp.com"], ["rank", 15], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.186298"], ["updated_at", "2015-08-19 13:30:22.186298"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"7\", \"x-xss-protection\"=>\"15\", \"x-content-type-options\"=>\"-6\", \"x-download-options\"=>\"-15\", \"x-frame-options\"=>\"8\", \"public-key-pins\"=>\"0\", \"x-permitted-cross-domain-policies\"=>\"1\""], ["domain_id", 19], ["created_at", "2015-08-19 13:30:22.189458"], ["updated_at", "2015-08-19 13:30:22.189458"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "kessler.info"], ["rank", 16], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.193482"], ["updated_at", "2015-08-19 13:30:22.193482"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"0\", \"x-xss-protection\"=>\"-2\", \"x-content-type-options\"=>\"-12\", \"x-download-options\"=>\"12\", \"x-frame-options\"=>\"-1\", \"public-key-pins\"=>\"6\", \"x-permitted-cross-domain-policies\"=>\"5\""], ["domain_id", 20], ["created_at", "2015-08-19 13:30:22.196660"], ["updated_at", "2015-08-19 13:30:22.196660"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"-1\", \"x-xss-protection\"=>\"-15\", \"x-content-type-options\"=>\"-7\", \"x-download-options\"=>\"-14\", \"x-frame-options\"=>\"0\", \"public-key-pins\"=>\"-13\", \"x-permitted-cross-domain-policies\"=>\"-13\""], ["score", 14], ["created_at", "2015-08-19 13:30:22.199765"], ["updated_at", "2015-08-19 13:30:22.199765"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "altenwerth.biz"], ["rank", 17], ["country_code", "AU"], ["created_at", "2015-08-19 13:30:22.204296"], ["updated_at", "2015-08-19 13:30:22.204296"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 21], ["updated_at", "2015-08-19 13:30:22.205846"], ["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.3ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "boehm.info"], ["rank", 18], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.213472"], ["updated_at", "2015-08-19 13:30:22.213472"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-5\", \"x-xss-protection\"=>\"2\", \"x-content-type-options\"=>\"12\", \"x-download-options\"=>\"8\", \"x-frame-options\"=>\"-12\", \"public-key-pins\"=>\"6\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["domain_id", 22], ["created_at", "2015-08-19 13:30:22.217206"], ["updated_at", "2015-08-19 13:30:22.217206"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "reicherthaley.us"], ["rank", 19], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.220326"], ["updated_at", "2015-08-19 13:30:22.220326"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"5\", \"x-xss-protection\"=>\"-13\", \"x-content-type-options\"=>\"-3\", \"x-download-options\"=>\"1\", \"x-frame-options\"=>\"11\", \"public-key-pins\"=>\"-3\", \"x-permitted-cross-domain-policies\"=>\"15\""], ["domain_id", 23], ["created_at", "2015-08-19 13:30:22.223400"], ["updated_at", "2015-08-19 13:30:22.223400"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "huels.com"], ["rank", 20], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.226911"], ["updated_at", "2015-08-19 13:30:22.226911"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-4\", \"x-xss-protection\"=>\"1\", \"x-content-type-options\"=>\"0\", \"x-download-options\"=>\"-12\", \"x-frame-options\"=>\"-1\", \"public-key-pins\"=>\"4\", \"x-permitted-cross-domain-policies\"=>\"13\""], ["domain_id", 24], ["created_at", "2015-08-19 13:30:22.230162"], ["updated_at", "2015-08-19 13:30:22.230162"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"-9\", \"x-xss-protection\"=>\"12\", \"x-content-type-options\"=>\"6\", \"x-download-options\"=>\"-10\", \"x-frame-options\"=>\"-8\", \"public-key-pins\"=>\"14\", \"x-permitted-cross-domain-policies\"=>\"0\""], ["score", 14], ["created_at", "2015-08-19 13:30:22.233197"], ["updated_at", "2015-08-19 13:30:22.233197"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "rogahn.co.uk"], ["rank", 21], ["country_code", "AU"], ["created_at", "2015-08-19 13:30:22.236466"], ["updated_at", "2015-08-19 13:30:22.236466"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 25], ["updated_at", "2015-08-19 13:30:22.238331"], ["id", 11]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.3ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" WHERE "headlines_domains"."country_code" = $1  [["country_code", "AU"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "muellergrimes.info"], ["rank", 22], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.246192"], ["updated_at", "2015-08-19 13:30:22.246192"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-12\", \"x-xss-protection\"=>\"13\", \"x-content-type-options\"=>\"-11\", \"x-download-options\"=>\"0\", \"x-frame-options\"=>\"7\", \"public-key-pins\"=>\"-1\", \"x-permitted-cross-domain-policies\"=>\"-11\""], ["domain_id", 26], ["created_at", "2015-08-19 13:30:22.250581"], ["updated_at", "2015-08-19 13:30:22.250581"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "durgan.us"], ["rank", 23], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.255031"], ["updated_at", "2015-08-19 13:30:22.255031"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-15\", \"x-xss-protection\"=>\"14\", \"x-content-type-options\"=>\"6\", \"x-download-options\"=>\"-2\", \"x-frame-options\"=>\"-2\", \"public-key-pins\"=>\"-13\", \"x-permitted-cross-domain-policies\"=>\"-12\""], ["domain_id", 27], ["created_at", "2015-08-19 13:30:22.258255"], ["updated_at", "2015-08-19 13:30:22.258255"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "schmidtgulgowski.info"], ["rank", 24], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.261856"], ["updated_at", "2015-08-19 13:30:22.261856"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-3\", \"x-xss-protection\"=>\"14\", \"x-content-type-options\"=>\"4\", \"x-download-options\"=>\"1\", \"x-frame-options\"=>\"-14\", \"public-key-pins\"=>\"3\", \"x-permitted-cross-domain-policies\"=>\"4\""], ["domain_id", 28], ["created_at", "2015-08-19 13:30:22.264975"], ["updated_at", "2015-08-19 13:30:22.264975"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"4\", \"x-xss-protection\"=>\"-2\", \"x-content-type-options\"=>\"4\", \"x-download-options\"=>\"-13\", \"x-frame-options\"=>\"-10\", \"public-key-pins\"=>\"-3\", \"x-permitted-cross-domain-policies\"=>\"6\""], ["score", 14], ["created_at", "2015-08-19 13:30:22.268013"], ["updated_at", "2015-08-19 13:30:22.268013"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "andersonterry.ca"], ["rank", 25], ["country_code", "AU"], ["created_at", "2015-08-19 13:30:22.272521"], ["updated_at", "2015-08-19 13:30:22.272521"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 29], ["updated_at", "2015-08-19 13:30:22.274161"], ["id", 15]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.8ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" INNER JOIN "headlines_scans" ON "headlines_scans"."domain_id" = "headlines_domains"."id" WHERE ((headlines_scans.score BETWEEN 10 AND 100))
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "oberbrunnerwunsch.biz"], ["rank", 26], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.284312"], ["updated_at", "2015-08-19 13:30:22.284312"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-3\", \"x-xss-protection\"=>\"-2\", \"x-content-type-options\"=>\"4\", \"x-download-options\"=>\"10\", \"x-frame-options\"=>\"-12\", \"public-key-pins\"=>\"0\", \"x-permitted-cross-domain-policies\"=>\"-10\""], ["domain_id", 30], ["created_at", "2015-08-19 13:30:22.287738"], ["updated_at", "2015-08-19 13:30:22.287738"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "yundt.ca"], ["rank", 27], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.290793"], ["updated_at", "2015-08-19 13:30:22.290793"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"-4\", \"x-xss-protection\"=>\"9\", \"x-content-type-options\"=>\"2\", \"x-download-options\"=>\"-15\", \"x-frame-options\"=>\"-7\", \"public-key-pins\"=>\"14\", \"x-permitted-cross-domain-policies\"=>\"13\""], ["domain_id", 31], ["created_at", "2015-08-19 13:30:22.294017"], ["updated_at", "2015-08-19 13:30:22.294017"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "terrywindler.name"], ["rank", 28], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.297598"], ["updated_at", "2015-08-19 13:30:22.297598"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_scans" ("results", "domain_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["results", "\"strict-transport-security\"=>\"15\", \"x-xss-protection\"=>\"-4\", \"x-content-type-options\"=>\"4\", \"x-download-options\"=>\"-1\", \"x-frame-options\"=>\"11\", \"public-key-pins\"=>\"9\", \"x-permitted-cross-domain-policies\"=>\"-5\""], ["domain_id", 32], ["created_at", "2015-08-19 13:30:22.300639"], ["updated_at", "2015-08-19 13:30:22.300639"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_scans" ("results", "score", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["results", "\"strict-transport-security\"=>\"12\", \"x-xss-protection\"=>\"9\", \"x-content-type-options\"=>\"14\", \"x-download-options\"=>\"9\", \"x-frame-options\"=>\"-13\", \"public-key-pins\"=>\"-10\", \"x-permitted-cross-domain-policies\"=>\"-12\""], ["score", 14], ["created_at", "2015-08-19 13:30:22.303607"], ["updated_at", "2015-08-19 13:30:22.303607"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "smithamrutherford.co.uk"], ["rank", 29], ["country_code", "AU"], ["created_at", "2015-08-19 13:30:22.307349"], ["updated_at", "2015-08-19 13:30:22.307349"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "headlines_scans" SET "domain_id" = $1, "updated_at" = $2 WHERE "headlines_scans"."id" = $3  [["domain_id", 33], ["updated_at", "2015-08-19 13:30:22.308992"], ["id", 19]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mHeadlines::Domain Load (0.8ms)[0m  SELECT "headlines_domains".* FROM "headlines_domains" INNER JOIN "headlines_scans" ON "headlines_scans"."domain_id" = "headlines_domains"."id" WHERE (((headlines_scans.results -> 'strict-transport-security')::int > 0))
  [1m[36mHeadlines::Scan Load (0.4ms)[0m  [1mSELECT  "headlines_scans".* FROM "headlines_scans" WHERE "headlines_scans"."domain_id" = $1  ORDER BY headlines_scans.id DESC LIMIT 1[0m  [["domain_id", 32]]
  [1m[35mHeadlines::Scan Load (0.4ms)[0m  SELECT  "headlines_scans".* FROM "headlines_scans" WHERE "headlines_scans"."domain_id" = $1  ORDER BY headlines_scans.id DESC LIMIT 1  [["domain_id", 33]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "kemmer.co.uk"], ["rank", 30], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.324118"], ["updated_at", "2015-08-19 13:30:22.324118"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"[0m  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"  [["domain_name", "kemmer.co.uk"], ["category_id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "olson.info"], ["rank", 31], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.342148"], ["updated_at", "2015-08-19 13:30:22.342148"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"  [["domain_name", "olson.info"], ["category_id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m


Started GET "/headlines/categories.json" for 127.0.0.1 at 2015-08-19 16:30:22 +0300
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Headlines::CategoriesController#index as JSON
  [1m[36mHeadlines::Category Load (0.3ms)[0m  [1mSELECT "headlines_categories".* FROM "headlines_categories" WHERE "headlines_categories"."category_id" = $1[0m  [["category_id", 1]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "sanford.com"], ["rank", 32], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.385482"], ["updated_at", "2015-08-19 13:30:22.385482"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_categories" ("title", "topic") VALUES ($1, $2) RETURNING "id"  [["title", "Business and Economy/Shopping"], ["topic", "Top/Regional/Asia/India/Business_and_Economy/Shopping"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"[0m  [["domain_name", "sanford.com"], ["category_id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "headlines_domains" ("name", "rank", "country_code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "turcottedonnelly.com"], ["rank", 33], ["country_code", "US"], ["created_at", "2015-08-19 13:30:22.393142"], ["updated_at", "2015-08-19 13:30:22.393142"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "headlines_domains_categories" ("domain_name", "category_id") VALUES ($1, $2) RETURNING "id"[0m  [["domain_name", "turcottedonnelly.com"], ["category_id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1


Started GET "/headlines/categories.json?domains_per_category=1" for 127.0.0.1 at 2015-08-19 16:30:22 +0300
Processing by Headlines::CategoriesController#index as JSON
  Parameters: {"domains_per_category"=>"1"}
  [1m[36mHeadlines::Category Load (0.4ms)[0m  [1mSELECT "headlines_categories".* FROM "headlines_categories" WHERE "headlines_categories"."category_id" = $1[0m  [["category_id", 1]]
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.8ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        );
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      [0m
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT
          summary.user_id, summary.username, sum(summary.points) AS total' at line 17: 
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        );
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (0.6ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        );
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      [0m
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT
          summary.user_id, summary.username, sum(summary.points) AS total' at line 17: 
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        );
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (6.8ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
  [1m[35m (2.6ms)[0m  
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (3.9ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
  [1m[35m (1.2ms)[0m  
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (25.8ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
  [1m[35m (2.1ms)[0m  
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (20.7ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
  [1m[35m (1.3ms)[0m  
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36mLeaderboard::User Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users`[0m
  [1m[35m (8.9ms)[0m  
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      
  [1m[36m (1.4ms)[0m  [1m
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      [0m
  [1m[36mLeaderboard::User Load (0.3ms)[0m  [1mSELECT `users`.* FROM `users`[0m
  [1m[35m (7.2ms)[0m  
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      
  [1m[36m (1.7ms)[0m  [1m
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      [0m
  [1m[36m (10.6ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
  [1m[35m (1.2ms)[0m  
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (22.6ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
  [1m[35m (1.3ms)[0m  
        SELECT
          summary.user_id, summary.username, sum(summary.points) AS total_points,
          sum(CASE WHEN summary.challenge_id = 1 THEN summary.points ELSE null END) as points_1,
          sum(CASE WHEN summary.challenge_id = 2 THEN summary.points ELSE null END) as points_2,
          sum(CASE WHEN summary.challenge_id = 3 THEN summary.points ELSE null END) as points_3,
          sum(CASE WHEN summary.challenge_id = 4 THEN summary.points ELSE null END) as points_4,
          sum(CASE WHEN summary.challenge_id = 5 THEN summary.points ELSE null END) as points_5
        FROM users_with_points summary
        GROUP BY 1, 2
        ORDER BY 3 DESC
      
  [1m[36m (1.1ms)[0m  [1m
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      [0m
Mysql2::Error: Unknown column 'users.exclude_leaderboard' in 'on clause': 
        CREATE OR REPLACE VIEW users_with_points AS (
        SELECT
          users.id AS user_id,
          users.username,
          challenges.id AS challenge_id,
          challenges.name,
          CASE
          WHEN submissions.is_correct = 0 THEN '0'
            WHEN submissions.is_correct = 1 THEN GREATEST(0, 7 - DATEDIFF(submissions.last_updated, challenges.date_begin))
            ELSE '-'
          END AS points
        FROM users
        LEFT JOIN submissions ON users.id = submissions.user_id
        LEFT JOIN challenges ON challenges.id = submissions.challenge_id
          AND users.exclude_leaderboard = 0 AND challenges.exclude_leaderboard = 0
        )
      
